### 2.7.1 Комбинирование масок и срезов

Можно применять булеву маску к строкам, а срез — к столбцам (или наоборот).

```python
# Выбирает строки, соответствующие маске, и столбцы в диапазоне a:n
arr[mask, a:n]
```

---

### 2.7.2-2.7.3 Логические операции с масками

*   **Инвертировать маску (NOT):** `~mask`
    (Все `True` станут `False`, и наоборот).

*   **Комбинирование масок:**
    *   Логическое **И (AND):** `&`
    *   Логическое **ИЛИ (OR):** `|`

**Важно:** При комбинировании условий их необходимо заключать в круглые скобки из-за особенностей приоритета операторов в Python.

```python
# Маска для выбора элементов, которые больше 5 И меньше 10
mask = (arr > 5) & (arr < 10)

# Применение маски
result = arr[mask]
```

---

### Fancy indexing — это индексация массивов с использованием списков или других массивов целых чисел. **В отличие от срезов, она всегда создает копию данных.**

**2.7.4-2.7.5** **Выбор конкретных элементов/строк:**
Передача списка индексов позволяет выбрать элементы в произвольном порядке.
```python
arr = np.array([10, 20, 30, 40, 50])

# Выбрать 0-й, 2-й и 4-й элементы
selected = arr[[0, 2, 4]] # -> [10, 30, 50]
```

**2.7.6** **Для двумерных массивов:**
Если передать два списка, они будут интерпретированы как пары координат `(строка, столбец)`.
```python
arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])

# Выбрать элементы в позициях (0, 1), (1, 2) и (2, 0)
selected = arr[[0, 1, 2], [1, 2, 0]] # -> [2, 6, 7]
```
Результатом будет **одномерный** массив, содержащий элементы `arr[0,1]`, `arr[1,2]` и `arr[2,0]`.

**2.7.7** **Комбинирование fancy-индексации и срезов:**
Чтобы выбрать конкретные строки, а затем применить к ним срез, нужно делать это последовательно.

**Пример:**
```python
# Создадим массив 6x5 для примера
arr = np.arange(30).reshape((6, 5))
print("Исходный массив:\n", arr)

# Шаг 1: Выбрать только строки с индексами 0, 3, 5
selected_rows = arr[[0, 3, 5]]
print("\nВыбранные строки (0, 3, 5):\n", selected_rows)

# Шаг 2: Из этих выбранных строк взять срез:
# все строки (относительно нового массива) и столбцы с 1 по 3
result = selected_rows[:, 1:4]
print("\nФинальный результат (срез столбцов 1:4):\n", result)
```

---

### Метод `.reshape()` позволяет изменить форму массива, не меняя его данные.

**Важное правило:** общее количество элементов в массиве до и после преобразования должно оставаться **одинаковым**.

**2.7.8-2.7.9** **Перевод одномерного массива в двумерный:**
```python
arr_1d = np.arange(12) # Массив из 12 элементов (0-11)

# Преобразуем в матрицу 3x4
# 3 строки, 4 столбца. 3 * 4 = 12
arr_2d = arr_1d.reshape((3, 4))
```

**2.7.10** **Перевод в трёхмерный массив:**
```python
# Преобразуем тот же массив в 3D форму 2x2x3
# 2 блока, в каждом 2 строки и 3 столбца. 2 * 2 * 3 = 12
arr_3d = arr_1d.reshape((2, 2, 3))
```
